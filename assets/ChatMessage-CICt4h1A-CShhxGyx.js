import{V as v,u as e,J as j,v as u,a as k,s as w}from"./index-CL7HjhdV.js";const M=({onSendMessage:r,isLoading:n,placeholder:x="Type your message..."})=>{const[o,l]=u.useState(""),c=u.useRef(null),m=u.useRef(!0);u.useEffect(()=>(m.current=!0,()=>{m.current=!1}),[]),u.useEffect(()=>{c.current&&!n&&m.current&&c.current.focus()},[n]);const g=()=>{o.trim()&&!n&&(r(o.trim()),l(""))},a=s=>{s.key==="Enter"&&!s.shiftKey&&(s.preventDefault(),g())};return e.jsx("div",{className:"p-4 border-t bg-card dark:bg-dark-card border-border dark:border-dark-border",children:e.jsxs("div",{className:"flex items-end space-x-2",children:[e.jsx("textarea",{ref:c,value:o,onChange:s=>l(s.target.value),onKeyPress:a,placeholder:x,rows:1,className:`flex-1 p-2.5 border rounded-md resize-none 
                     bg-background dark:bg-dark-input 
                     border-input dark:border-dark-border 
                     text-foreground dark:text-dark-foreground 
                     placeholder:text-muted-foreground dark:placeholder:text-dark-muted-foreground
                     focus:ring-2 focus:ring-ring dark:focus:ring-dark-ring focus:border-transparent 
                     min-h-[40px] max-h-[120px]
                     transition-all duration-150 ease-in-out`,disabled:n}),e.jsxs(k,{onClick:g,isLoading:n,disabled:!o.trim(),className:"h-[42px]",children:[" ","Send"]})]})})},N=({className:r})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:r||"w-6 h-6",children:e.jsx("path",{fillRule:"evenodd",d:"M7.5 6a4.5 4.5 0 119 0 4.5 4.5 0 01-9 0zM3.751 20.105a8.25 8.25 0 0116.498 0 .75.75 0 01-.437.695A18.683 18.683 0 0112 22.5c-2.786 0-5.433-.608-7.812-1.7a.75.75 0 01-.437-.695z",clipRule:"evenodd"})}),$=({message:r,onSuggestionClick:n})=>{var x;const{t:o}=v(),l=r.sender==="user",c=r.sender==="system",m=a=>{var s,h;const d="Next, you could ask:";let f=a,p=((s=r.metadata)==null?void 0:s.suggestions)||[];if(a.includes(d)){const i=a.split(d);f=i[0].trim(),i[1]&&(p=i[1].split(`
`).map(t=>t.replace(/^[-*]?\s*/,"").trim()).filter(t=>t.length>0&&t.length<100))}(h=r.metadata)!=null&&h.suggestions&&r.metadata.suggestions.length>0&&(p=r.metadata.suggestions);const b=f.split(`
`).map((i,t,y)=>e.jsxs(w.Fragment,{children:[i,t<y.length-1&&e.jsx("br",{})]},`line-${t}`));return e.jsxs(e.Fragment,{children:[b,r.sender==="ai"&&p.length>0&&n&&e.jsxs("div",{className:"mt-3 pt-2 border-t border-white/10 dark:border-black/20",children:[e.jsx("p",{className:"text-xs font-medium mb-1.5 opacity-80",children:o("chatMessage.suggestions")}),e.jsx("div",{className:"flex flex-wrap gap-1.5",children:p.map((i,t)=>e.jsx(k,{variant:"outline",size:"sm",onClick:()=>n(i),className:"text-xs !px-2.5 !py-1 bg-primary/5 text-primary dark:bg-dark-primary/10 dark:text-dark-primary border border-primary/20 dark:border-dark-primary/30 hover:bg-primary/10 dark:hover:bg-dark-primary/20 rounded-full shadow-sm hover:shadow-md transition-all",children:i},`suggestion-${t}`))})]})]})},g=a=>!a||a.length===0?null:e.jsxs("div",{className:"mt-2.5 pt-2 border-t border-white/20 dark:border-black/20 text-xs",children:[e.jsx("h4",{className:"font-semibold mb-1 opacity-90",children:o("chatMessage.sources")}),e.jsx("ul",{className:"list-disc list-inside space-y-1",children:a.map((s,h)=>{const d=s.web||s.retrievedContext;return!d||!d.uri?null:e.jsx("li",{children:e.jsx("a",{href:d.uri,target:"_blank",rel:"noopener noreferrer",className:"hover:underline opacity-80 hover:opacity-100",title:d.uri,children:d.title||new URL(d.uri).hostname})},h)})})]});return c?e.jsx("div",{className:"my-2 py-2 px-4 text-xs text-center text-muted-foreground dark:text-dark-muted-foreground",children:e.jsx("em",{children:r.text})}):e.jsx("div",{className:`flex my-3 ${l?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`flex items-start w-full max-w-xs sm:max-w-sm md:max-w-md lg:max-w-lg xl:max-w-xl ${l?"flex-row-reverse":""}`,children:[e.jsx("div",{className:`flex-shrink-0 h-8 w-8 sm:h-9 sm:w-9 rounded-full flex items-center justify-center shadow-sm overflow-hidden ${l?"ml-2 sm:ml-2.5 bg-secondary dark:bg-dark-secondary":"mr-2 sm:mr-2.5 bg-primary dark:bg-dark-primary"}`,children:l?e.jsx(N,{className:"h-4 w-4 sm:h-5 sm:w-5 text-secondary-foreground dark:text-dark-secondary-foreground"}):e.jsx(j,{className:"h-full w-full object-cover scale-150"})}),e.jsxs("div",{className:`px-3 py-2 sm:px-4 sm:py-2.5 rounded-lg shadow-md ${l?"bg-primary text-primary-foreground dark:bg-dark-primary dark:text-dark-primary-foreground rounded-br-none":"bg-card text-card-foreground dark:bg-dark-card dark:text-dark-card-foreground rounded-bl-none"}`,children:[e.jsx("div",{className:"text-sm whitespace-pre-wrap",children:m(r.text)}),r.sender==="ai"&&g((x=r.metadata)==null?void 0:x.sources)]})]})})};export{$ as C,M};
