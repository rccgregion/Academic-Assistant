import{r as u,j as r,c as b,u as j,z as w,R as v}from"./index-Cf9C7PVC.js";const M=({onSendMessage:e,isLoading:o,placeholder:x="Type your message..."})=>{const[a,h]=u.useState(""),i=u.useRef(null),c=u.useRef(!0);u.useEffect(()=>(c.current=!0,()=>{c.current=!1}),[]),u.useEffect(()=>{i.current&&!o&&c.current&&i.current.focus()},[o]);const m=()=>{a.trim()&&!o&&(e(a.trim()),h(""))},d=t=>{t.key==="Enter"&&!t.shiftKey&&(t.preventDefault(),m())};return r.jsx("div",{className:"p-4 border-t bg-card dark:bg-dark-card border-border dark:border-dark-border",children:r.jsxs("div",{className:"flex items-end space-x-2",children:[r.jsx("textarea",{ref:i,value:a,onChange:t=>h(t.target.value),onKeyPress:d,placeholder:x,rows:1,className:`flex-1 p-2.5 border rounded-md resize-none 
                     bg-background dark:bg-dark-input 
                     border-input dark:border-dark-border 
                     text-foreground dark:text-dark-foreground 
                     placeholder:text-muted-foreground dark:placeholder:text-dark-muted-foreground
                     focus:ring-2 focus:ring-ring dark:focus:ring-dark-ring focus:border-transparent 
                     min-h-[40px] max-h-[120px]
                     transition-all duration-150 ease-in-out`,disabled:o}),r.jsxs(b,{onClick:m,isLoading:o,disabled:!a.trim(),className:"h-[42px]",children:[" ","Send"]})]})})},N=({className:e})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:e||"w-6 h-6",children:r.jsx("path",{fillRule:"evenodd",d:"M7.5 6a4.5 4.5 0 119 0 4.5 4.5 0 01-9 0zM3.751 20.105a8.25 8.25 0 0116.498 0 .75.75 0 01-.437.695A18.683 18.683 0 0112 22.5c-2.786 0-5.433-.608-7.812-1.7a.75.75 0 01-.437-.695z",clipRule:"evenodd"})}),C=({message:e,onSuggestionClick:o})=>{var m;const{t:x}=j(),a=e.sender==="user",h=e.sender==="system",i=d=>{var f,g;const t="Next, you could ask:";let p=d,s=((f=e.metadata)==null?void 0:f.suggestions)||[];if(d.includes(t)){const l=d.split(t);p=l[0].trim(),l[1]&&(s=l[1].split(`
`).map(n=>n.replace(/^[-*]?\s*/,"").trim()).filter(n=>n.length>0&&n.length<100))}(g=e.metadata)!=null&&g.suggestions&&e.metadata.suggestions.length>0&&(s=e.metadata.suggestions);const k=p.split(`
`).map((l,n,y)=>r.jsxs(v.Fragment,{children:[l,n<y.length-1&&r.jsx("br",{})]},`line-${n}`));return r.jsxs(r.Fragment,{children:[k,e.sender==="ai"&&s.length>0&&o&&r.jsxs("div",{className:"mt-3 pt-2 border-t border-white/10 dark:border-black/20",children:[r.jsx("p",{className:"text-xs font-medium mb-1.5 opacity-80",children:x("chatMessage.suggestions")}),r.jsx("div",{className:"flex flex-wrap gap-1.5",children:s.map((l,n)=>r.jsx(b,{variant:"outline",size:"sm",onClick:()=>o(l),className:"text-xs !px-2.5 !py-1 bg-primary/5 text-primary dark:bg-dark-primary/10 dark:text-dark-primary border border-primary/20 dark:border-dark-primary/30 hover:bg-primary/10 dark:hover:bg-dark-primary/20 rounded-full shadow-sm hover:shadow-md transition-all",children:l},`suggestion-${n}`))})]})]})},c=d=>!d||d.length===0?null:r.jsxs("div",{className:"mt-2.5 pt-2 border-t border-white/20 dark:border-black/20 text-xs",children:[r.jsx("h4",{className:"font-semibold mb-1 opacity-90",children:x("chatMessage.sources")}),r.jsx("ul",{className:"list-disc list-inside space-y-1",children:d.map((t,p)=>{const s=t.web||t.retrievedContext;return!s||!s.uri?null:r.jsx("li",{children:r.jsx("a",{href:s.uri,target:"_blank",rel:"noopener noreferrer",className:"hover:underline opacity-80 hover:opacity-100",title:s.uri,children:s.title||new URL(s.uri).hostname})},p)})})]});return h?r.jsx("div",{className:"my-2 py-2 px-4 text-xs text-center text-muted-foreground dark:text-dark-muted-foreground",children:r.jsx("em",{children:e.text})}):r.jsx("div",{className:`flex my-3 ${a?"justify-end":"justify-start"}`,children:r.jsxs("div",{className:`flex items-start w-full max-w-xs sm:max-w-sm md:max-w-md lg:max-w-lg xl:max-w-xl ${a?"flex-row-reverse":""}`,children:[r.jsx("div",{className:`flex-shrink-0 h-8 w-8 sm:h-9 sm:w-9 rounded-full flex items-center justify-center shadow-sm overflow-hidden ${a?"ml-2 sm:ml-2.5 bg-secondary dark:bg-dark-secondary":"mr-2 sm:mr-2.5 bg-primary dark:bg-dark-primary"}`,children:a?r.jsx(N,{className:"h-4 w-4 sm:h-5 sm:w-5 text-secondary-foreground dark:text-dark-secondary-foreground"}):r.jsx(w,{className:"h-full w-full object-cover scale-150"})}),r.jsxs("div",{className:`px-3 py-2 sm:px-4 sm:py-2.5 rounded-lg shadow-md ${a?"bg-primary text-primary-foreground dark:bg-dark-primary dark:text-dark-primary-foreground rounded-br-none":"bg-card text-card-foreground dark:bg-dark-card dark:text-dark-card-foreground rounded-bl-none"}`,children:[r.jsx("div",{className:"text-sm whitespace-pre-wrap",children:i(e.text)}),e.sender==="ai"&&c((m=e.metadata)==null?void 0:m.sources)]})]})})};export{C,M as a};
