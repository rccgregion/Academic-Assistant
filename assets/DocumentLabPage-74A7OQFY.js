import{r as o,w as v,q as C,j as e,e as h,t as P,c as s,S as F,A as D,g as S,f as I,i as A,P as W}from"./index-DwfKsHWR.js";import{C as j}from"./Card-BP-gc27O.js";const $=()=>{const[n,i]=o.useState(null),[r,l]=o.useState(null),[m,u]=o.useState(!1),[L,R]=o.useState(!1),[T,x]=o.useState(null),c=o.useRef(null),b=v(),{addToast:a}=C(),w=o.useCallback(f=>{var y;const t=(y=f.target.files)==null?void 0:y[0];if(t){if(t.type==="application/pdf"){a("PDF parsing is not fully supported yet. This feature requires an additional PDF library (like pdf.js or pdf-lib) to be integrated into the application. For now, please use .txt or .md files.","warning",7e3),i(t.name+" (PDF - content not loaded)"),l("PDF content cannot be displayed without a parsing library."),u(!1);return}if(t.type==="text/plain"||t.type==="text/markdown"||t.name.endsWith(".md")||t.name.endsWith(".txt")){u(!0),i(t.name),x(null);const p=new FileReader;p.onload=N=>{var k;l((k=N.target)==null?void 0:k.result),u(!1),a(`${t.name} loaded successfully! Ready to process.`,"success")},p.onerror=()=>{u(!1),a(`Error reading file: ${t.name}`,"error"),i(null),l(null)},p.readAsText(t)}else a(`File '${t.name}' is not supported. Please upload a plain text (.txt), Markdown (.md), or PDF file.`,"warning",6e3),i(null),l(null),c.current&&(c.current.value="")}},[a]),g=()=>{i(null),l(null),x(null),c.current&&(c.current.value=""),a("Document cleared. Upload a new one.","info")},d=(f,t)=>{r&&!r.startsWith("PDF content cannot be displayed")?b(f,{state:{initialText:r,sourceFeatureName:"Document Lab",documentName:n}}):r&&r.startsWith("PDF content cannot be displayed")?a(`Cannot send PDF content to ${t} as it's not parsed. Please use .txt or .md.`,"warning"):a(`No document content to send to ${t}. Please upload a document first.`,"warning")};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("header",{className:"pb-4",children:[e.jsxs("h1",{className:"text-2xl md:text-3xl font-bold tracking-tight text-foreground dark:text-dark-foreground flex items-center",children:[e.jsx(h,{className:"h-7 w-7 md:h-8 md:w-8 mr-2 text-primary dark:text-dark-primary"}),"Document Lab"]}),e.jsx("p",{className:"mt-1 text-muted-foreground dark:text-dark-muted-foreground",children:"Upload your text documents (.txt, .md) to analyze, rewrite, or get feedback using SHARON's suite of tools. (Basic PDF upload supported, content parsing coming soon)."})]}),e.jsxs(j,{title:n?`Loaded: ${n}`:"Upload Your Document",children:[!r&&!m&&e.jsxs("div",{className:"text-center py-8 text-muted-foreground dark:text-dark-muted-foreground",children:[e.jsx(h,{className:"h-16 w-16 mx-auto text-primary/30 dark:text-dark-primary/30 mb-4"}),e.jsx("p",{className:"font-semibold text-lg",children:"No Document Loaded"}),e.jsx("p",{className:"text-sm mb-4",children:"Click below to select a .txt, .md, or .pdf file from your device to begin."})]}),!r||r&&(n!=null&&n.endsWith("(PDF - content not loaded)"))?e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"file",ref:c,accept:".txt,.md,.pdf,text/plain,text/markdown,application/pdf",onChange:w,className:`block w-full text-sm text-muted-foreground dark:text-dark-muted-foreground
                         file:mr-4 file:py-2 file:px-4
                         file:rounded-md file:border-0
                         file:text-sm file:font-semibold
                         file:bg-primary/10 file:text-primary
                         dark:file:bg-dark-primary/20 dark:file:text-dark-primary
                         hover:file:bg-primary/20 dark:hover:file:bg-dark-primary/30
                         cursor-pointer focus:outline-none focus:ring-2 focus:ring-primary dark:focus:ring-dark-primary rounded-md p-1`,"aria-label":"Document upload input",disabled:m}),m&&e.jsx("div",{className:"mt-2 flex justify-center",children:e.jsx(P,{text:"Loading file..."})}),e.jsx("p",{className:"mt-2 text-xs text-muted-foreground dark:text-dark-muted-foreground text-center",children:"Supported formats: .txt, .md, .pdf (PDF content preview/processing requires future library integration)"}),n&&r&&e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx(s,{onClick:g,variant:"outline",className:"w-full sm:w-auto",children:"Clear & Upload New"})})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2 text-foreground dark:text-dark-foreground",children:"Document Content Preview:"}),e.jsx("textarea",{value:r,readOnly:!0,rows:10,className:"w-full p-2.5 border rounded-md bg-muted/50 dark:bg-dark-input/50 dark:border-dark-border dark:text-dark-foreground whitespace-pre-wrap transition-all","aria-label":"Uploaded document content preview"})]}),e.jsx("div",{className:"flex flex-col sm:flex-row justify-end items-center gap-2",children:e.jsx(s,{onClick:g,variant:"outline",className:"w-full sm:w-auto",children:"Clear & Upload New"})})]})]}),r&&!r.startsWith("PDF content cannot be displayed")&&e.jsx(j,{title:"Process Document With:",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs(s,{variant:"secondary",onClick:()=>d("/stealth-writer","StealthWriter"),className:"flex items-center justify-center py-3 dark:bg-dark-secondary dark:text-dark-secondary-foreground",children:[e.jsx(F,{className:"h-5 w-5 mr-2"}),"Rewrite (StealthWriter)"]}),e.jsxs(s,{variant:"secondary",onClick:()=>d("/professor-ai","Professor AI"),className:"flex items-center justify-center py-3 dark:bg-dark-secondary dark:text-dark-secondary-foreground",children:[e.jsx(D,{className:"h-5 w-5 mr-2"}),"Get Feedback (Prof. AI)"]}),e.jsxs(s,{variant:"secondary",onClick:()=>d("/paper-analyzer","Paper Analyzer"),className:"flex items-center justify-center py-3 dark:bg-dark-secondary dark:text-dark-secondary-foreground",children:[e.jsx(S,{className:"h-5 w-5 mr-2"}),"Analyze as Paper"]}),e.jsxs(s,{variant:"secondary",onClick:()=>d("/integrity-guard","IntegrityGuard"),className:"flex items-center justify-center py-3 dark:bg-dark-secondary dark:text-dark-secondary-foreground",children:[e.jsx(I,{className:"h-5 w-5 mr-2"}),"Check Integrity"]}),e.jsxs(s,{variant:"secondary",onClick:()=>d("/viva-voce-prep","Viva Voce Prep"),className:"flex items-center justify-center py-3 dark:bg-dark-secondary dark:text-dark-secondary-foreground",children:[e.jsx(A,{className:"h-5 w-5 mr-2"}),"Prep for Viva Voce"]}),e.jsxs(s,{variant:"secondary",onClick:()=>d("/presentation-crafter","Presentation Crafter"),className:"flex items-center justify-center py-3 dark:bg-dark-secondary dark:text-dark-secondary-foreground",children:[e.jsx(W,{className:"h-5 w-5 mr-2"}),"Craft Presentation"]})]})})]})};export{$ as default};
