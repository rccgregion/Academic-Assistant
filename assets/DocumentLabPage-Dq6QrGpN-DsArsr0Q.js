import{v as n,p as v,y as P,u as e,W as h,l as D,a as s,B as F,F as C,e as W,c as S,q as $,Q as A}from"./index-CL7HjhdV.js";import{b as j}from"./Card-C8Vt2KLr-CXW7Tvcj.js";const q=()=>{const[d,l]=n.useState(null),[r,i]=n.useState(null),[f,m]=n.useState(!1),[L,R]=n.useState(!1),[U,g]=n.useState(null),c=n.useRef(null),b=v(),{addToast:a}=P(),w=n.useCallback(x=>{var u;const t=(u=x.target.files)==null?void 0:u[0];if(t){if(t.type==="application/pdf"){a("PDF parsing is not fully supported yet. This feature requires an additional PDF library (like pdf.js or pdf-lib) to be integrated into the application. For now, please use .txt or .md files.","warning",7e3),l(t.name+" (PDF - content not loaded)"),i("PDF content cannot be displayed without a parsing library."),m(!1);return}if(t.type==="text/plain"||t.type==="text/markdown"||t.name.endsWith(".md")||t.name.endsWith(".txt")){m(!0),l(t.name),g(null);const p=new FileReader;p.onload=N=>{var k;i((k=N.target)==null?void 0:k.result),m(!1),a(`${t.name} loaded successfully! Ready to process.`,"success")},p.onerror=()=>{m(!1),a(`Error reading file: ${t.name}`,"error"),l(null),i(null)},p.readAsText(t)}else a(`File '${t.name}' is not supported. Please upload a plain text (.txt), Markdown (.md), or PDF file.`,"warning",6e3),l(null),i(null),c.current&&(c.current.value="")}},[a]),y=()=>{l(null),i(null),g(null),c.current&&(c.current.value=""),a("Document cleared. Upload a new one.","info")},o=(x,u)=>{r&&!r.startsWith("PDF content cannot be displayed")?b(x,{state:{initialText:r,sourceFeatureName:"Document Lab",documentName:d}}):r&&r.startsWith("PDF content cannot be displayed")?a(`Cannot send PDF content to ${u} as it's not parsed. Please use .txt or .md.`,"warning"):a(`No document content to send to ${u}. Please upload a document first.`,"warning")};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("header",{className:"pb-4",children:[e.jsxs("h1",{className:"text-2xl md:text-3xl font-bold tracking-tight text-foreground dark:text-dark-foreground flex items-center",children:[e.jsx(h,{className:"h-7 w-7 md:h-8 md:w-8 mr-2 text-primary dark:text-dark-primary"}),"Document Lab"]}),e.jsx("p",{className:"mt-1 text-muted-foreground dark:text-dark-muted-foreground",children:"Upload your text documents (.txt, .md) to analyze, rewrite, or get feedback using SHARON's suite of tools. (Basic PDF upload supported, content parsing coming soon)."})]}),e.jsxs(j,{title:d?`Loaded: ${d}`:"Upload Your Document",children:[!r&&!f&&e.jsxs("div",{className:"text-center py-8 text-muted-foreground dark:text-dark-muted-foreground",children:[e.jsx(h,{className:"h-16 w-16 mx-auto text-primary/30 dark:text-dark-primary/30 mb-4"}),e.jsx("p",{className:"font-semibold text-lg",children:"No Document Loaded"}),e.jsx("p",{className:"text-sm mb-4",children:"Click below to select a .txt, .md, or .pdf file from your device to begin."})]}),!r||r&&d!=null&&d.endsWith("(PDF - content not loaded)")?e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"file",ref:c,accept:".txt,.md,.pdf,text/plain,text/markdown,application/pdf",onChange:w,className:`block w-full text-sm text-muted-foreground dark:text-dark-muted-foreground
                         file:mr-4 file:py-2 file:px-4
                         file:rounded-md file:border-0
                         file:text-sm file:font-semibold
                         file:bg-primary/10 file:text-primary
                         dark:file:bg-dark-primary/20 dark:file:text-dark-primary
                         hover:file:bg-primary/20 dark:hover:file:bg-dark-primary/30
                         cursor-pointer focus:outline-none focus:ring-2 focus:ring-primary dark:focus:ring-dark-primary rounded-md p-1`,"aria-label":"Document upload input",disabled:f}),f&&e.jsx("div",{className:"mt-2 flex justify-center",children:e.jsx(D,{text:"Loading file..."})}),e.jsx("p",{className:"mt-2 text-xs text-muted-foreground dark:text-dark-muted-foreground text-center",children:"Supported formats: .txt, .md, .pdf (PDF content preview/processing requires future library integration)"}),d&&r&&e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx(s,{onClick:y,variant:"outline",className:"w-full sm:w-auto",children:"Clear & Upload New"})})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2 text-foreground dark:text-dark-foreground",children:"Document Content Preview:"}),e.jsx("textarea",{value:r,readOnly:!0,rows:10,className:"w-full p-2.5 border rounded-md bg-muted/50 dark:bg-dark-input/50 dark:border-dark-border dark:text-dark-foreground whitespace-pre-wrap transition-all","aria-label":"Uploaded document content preview"})]}),e.jsx("div",{className:"flex flex-col sm:flex-row justify-end items-center gap-2",children:e.jsx(s,{onClick:y,variant:"outline",className:"w-full sm:w-auto",children:"Clear & Upload New"})})]})]}),r&&!r.startsWith("PDF content cannot be displayed")&&e.jsx(j,{title:"Process Document With:",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs(s,{variant:"secondary",onClick:()=>o("/stealth-writer","StealthWriter"),className:"flex items-center justify-center py-3 dark:bg-dark-secondary dark:text-dark-secondary-foreground",children:[e.jsx(F,{className:"h-5 w-5 mr-2"}),"Rewrite (StealthWriter)"]}),e.jsxs(s,{variant:"secondary",onClick:()=>o("/professor-ai","Professor AI"),className:"flex items-center justify-center py-3 dark:bg-dark-secondary dark:text-dark-secondary-foreground",children:[e.jsx(C,{className:"h-5 w-5 mr-2"}),"Get Feedback (Prof. AI)"]}),e.jsxs(s,{variant:"secondary",onClick:()=>o("/paper-analyzer","Paper Analyzer"),className:"flex items-center justify-center py-3 dark:bg-dark-secondary dark:text-dark-secondary-foreground",children:[e.jsx(W,{className:"h-5 w-5 mr-2"}),"Analyze as Paper"]}),e.jsxs(s,{variant:"secondary",onClick:()=>o("/integrity-guard","IntegrityGuard"),className:"flex items-center justify-center py-3 dark:bg-dark-secondary dark:text-dark-secondary-foreground",children:[e.jsx(S,{className:"h-5 w-5 mr-2"}),"Check Integrity"]}),e.jsxs(s,{variant:"secondary",onClick:()=>o("/viva-voce-prep","Viva Voce Prep"),className:"flex items-center justify-center py-3 dark:bg-dark-secondary dark:text-dark-secondary-foreground",children:[e.jsx($,{className:"h-5 w-5 mr-2"}),"Prep for Viva Voce"]}),e.jsxs(s,{variant:"secondary",onClick:()=>o("/presentation-crafter","Presentation Crafter"),className:"flex items-center justify-center py-3 dark:bg-dark-secondary dark:text-dark-secondary-foreground",children:[e.jsx(A,{className:"h-5 w-5 mr-2"}),"Craft Presentation"]})]})})]})};export{q as default};
