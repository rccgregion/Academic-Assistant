import{l as se,m as re,n as oe,o as ne,r,p as k,q as ie,s as le,j as t,S as _,c as h,t as ce,a as de}from"./index-DwfKsHWR.js";import{I as A}from"./Input-CaI1NqfY.js";import{S as w}from"./Select-B8-KE8W5.js";import{C as v}from"./Card-BP-gc27O.js";import{g as ue,p as me}from"./geminiService-BkXzVexN.js";import{d as pe}from"./downloadHelper-Y0t7dfPR.js";import{S as ge}from"./SendToToolDropdown-Bjbw8Njw.js";const l=[{value:"",label:"Select Field (Optional)"},{value:"Computer Science",label:"Computer Science"},{value:"Engineering (General)",label:"Engineering (General)"},{value:"Electrical Engineering",label:"Electrical Engineering"},{value:"Mechanical Engineering",label:"Mechanical Engineering"},{value:"Civil Engineering",label:"Civil Engineering"},{value:"Business Administration",label:"Business Administration"},{value:"Economics",label:"Economics"},{value:"Psychology",label:"Psychology"},{value:"Sociology",label:"Sociology"},{value:"History",label:"History"},{value:"Literature",label:"Literature"},{value:"Biology",label:"Biology"},{value:"Chemistry",label:"Chemistry"},{value:"Physics",label:"Physics"},{value:"Mathematics",label:"Mathematics"},{value:"Political Science",label:"Political Science"},{value:"Environmental Science",label:"Environmental Science"},{value:"Medicine",label:"Medicine"},{value:"Law",label:"Law"},{value:"Education",label:"Education"},{value:"Other...",label:"Other (Specify)"}],he=[{value:"",label:"Select Region (Optional)"},{value:"Global",label:"Global"},{value:"Africa (General)",label:"Africa (General)"},{value:"West Africa",label:"West Africa"},{value:"East Africa",label:"East Africa"},{value:"Southern Africa",label:"Southern Africa"},{value:"North Africa",label:"North Africa"},{value:"Nigeria",label:"Nigeria"},{value:"Europe",label:"Europe"},{value:"North America",label:"North America"},{value:"South America",label:"South America"},{value:"Asia (General)",label:"Asia (General)"},{value:"Southeast Asia",label:"Southeast Asia"},{value:"Middle East",label:"Middle East"},{value:"Oceania",label:"Oceania"},{value:"Other...",label:"Other (Specify)"}],Ce=()=>{const{settings:a,updateSettings:E}=se(),{openSaveToDriveModal:z}=re(),{getFeatureState:I,setFeatureState:P,clearFeatureState:W}=oe(),u=ne(),[f,R]=r.useState(a.currentSubject&&l.some(e=>e.value===a.currentSubject)?a.currentSubject:""),[O,x]=r.useState(a.currentSubject&&!l.some(e=>e.value===a.currentSubject)?a.currentSubject:""),[Y,S]=r.useState(!a.currentSubject||!l.some(e=>e.value===a.currentSubject)),[b,T]=r.useState(""),[L,j]=r.useState(""),[D,y]=r.useState(!1),[C,M]=r.useState(""),[N,F]=r.useState(""),[m,$]=r.useState(a.projectScope||k.GENERAL_RESEARCH),[c,p]=r.useState([]),[d,Q]=r.useState(!1),[G,g]=r.useState(null),{addToast:n}=ie(),U=Object.values(le).map(e=>({value:e,label:e})),V=Object.values(k).map(e=>({value:e,label:e})),i=f==="Other..."?O:f,K=b==="Other..."?L:b;r.useEffect(()=>{const e=I(u.pathname);e&&(p(e.ideas||[]),R(e.selectedCourse!==void 0?e.selectedCourse:a.currentSubject&&l.some(s=>s.value===a.currentSubject)?a.currentSubject:""),x(e.customCourse||(a.currentSubject&&!l.some(s=>s.value===a.currentSubject)?a.currentSubject:"")),S(e.selectedCourse==="Other..."||!e.selectedCourse&&!!e.customCourse),T(e.selectedRegion||""),j(e.customRegion||""),y(e.selectedRegion==="Other..."),M(e.researchTrends||""),F(e.customKeywords||""),$(e.projectScope||a.projectScope||k.GENERAL_RESEARCH),e.ideas&&e.ideas.length>0&&n("Loaded previously generated ideas and form state.","info"))},[u.pathname,I,n,a.currentSubject,a.projectScope]),r.useEffect(()=>{i&&E({currentSubject:i})},[i]);const B=e=>{const s={ideas:e,selectedCourse:f,customCourse:O,selectedRegion:b,customRegion:L,researchTrends:C,customKeywords:N,projectScope:m};P(u.pathname,s)},X=async()=>{if(!i.trim()){n("Please specify a course or field of study.","warning");return}Q(!0),g(null),p([]),E({currentSubject:i,academicLevel:a.academicLevel,projectScope:m});const e=`Generate 3 unique and detailed academic project ideas based on the following criteria:
    Academic Level: ${a.academicLevel}.
    Project Scope: ${m}.
    Course/Field: ${i}.
    ${K?`Consider research relevant to the region: ${K}.`:""}
    ${C?`Incorporate current research trends like: ${C}.`:""}
    ${N?`Focus on keywords: ${N}.`:""}

    For each idea, provide:
    1.  "title": A concise and engaging title.
    2.  "description": A detailed description (3-4 sentences) explaining the project's core concept and significance.
    3.  "potentialResearchQuestion": A specific, focused research question the project could aim to answer.
    4.  "suggestedMethodology": A brief suggestion for a primary research methodology (e.g., "Qualitative interviews with experts", "Quantitative survey analysis of student data", "Systematic literature review and meta-analysis", "Experimental design with control groups", "Case study approach").
    5.  "keywords": An array of 3-5 relevant keywords.
    6.  "level": The specified academic level ("${a.academicLevel}").
    7.  "scopeSuitability": A brief comment on how the idea fits the specified project scope ("${m}"), possibly suggesting adjustments if needed.

    Format the output as a single JSON array of objects. Ensure the JSON is valid.
    Example of one object:
    {
      "title": "The Impact of Gamified Learning on Student Engagement in Online STEM Courses",
      "description": "This project investigates how incorporating game mechanics into online STEM (Science, Technology, Engineering, and Mathematics) courses influences undergraduate student engagement and learning outcomes. It will explore various gamification elements like points, badges, leaderboards, and narratives, and their perceived effectiveness from student and instructor perspectives.",
      "potentialResearchQuestion": "To what extent does the integration of specific gamification elements in online STEM courses affect undergraduate student engagement levels and their academic performance compared to non-gamified courses?",
      "suggestedMethodology": "Mixed-methods approach: quantitative analysis of platform engagement data and grades, supplemented by qualitative student surveys and interviews.",
      "keywords": ["gamification", "online learning", "STEM education", "student engagement", "educational technology"],
      "level": "${a.academicLevel}",
      "scopeSuitability": "Suitable for a Master's thesis or an in-depth undergraduate research project, potentially scalable for a dissertation chapter by focusing on a specific STEM discipline or gamification aspect."
    }`,s=await ue("",{...a,currentSubject:i,projectScope:m,responseMimeType:"application/json",customPromptOverride:e});if(s.error)g(s.error),n(s.error,"error");else{const o=me(s.text);if(o&&Array.isArray(o))p(o),B(o),n(`Generated ${o.length} project ideas!`,"success");else{const J=[{title:"Raw AI Output (JSON Parsing Failed)",description:s.text,keywords:[],level:a.academicLevel,scopeSuitability:"N/A"}];p(J),B(J),g("AI returned data in an unexpected format. Displaying raw output if available. The AI might not have followed the JSON structure perfectly."),n("Failed to parse AI response into structured ideas.","error")}}Q(!1)},q=e=>e.map((s,o)=>`
Idea ${o+1}: ${s.title||"N/A"}
--------------------------------------------------
Description: ${s.description||"N/A"}
Potential Research Question: ${s.potentialResearchQuestion||"N/A"}
Suggested Methodology: ${s.suggestedMethodology||"N/A"}
Keywords: ${(s.keywords||[]).join(", ")||"N/A"}
Academic Level: ${s.level||"N/A"}
Scope Suitability: ${s.scopeSuitability||"N/A"}
==================================================
    `).join(`
`).trim(),H=(e,s)=>{const o=e.replace(/[^\w\s-]/gi,"").replace(/\s+/g,"_")||"ProjectIdeas";return`${de} - IdeaSpark - ${o}.${s}`},Z=()=>{if(c.length===0){n("No ideas to download.","info");return}const e=q(c),s=H(i,"txt");pe(e,s),n("Ideas download initiated.","success")},ee=()=>{if(c.length===0){n("No ideas to save.","info");return}const e=q(c),s=H(i,"txt");z(e,s)},te=()=>{R(a.currentSubject&&l.some(e=>e.value===a.currentSubject)?a.currentSubject:""),x(a.currentSubject&&!l.some(e=>e.value===a.currentSubject)?a.currentSubject:""),S(!a.currentSubject||!l.some(e=>e.value===a.currentSubject)),T(""),j(""),y(!1),M(""),F(""),$(a.projectScope||k.GENERAL_RESEARCH),p([]),g(null),W(u.pathname),n("All input fields and generated ideas cleared.","info")},ae=()=>{p([]),g(null);const e=I(u.pathname);e&&P(u.pathname,{...e,ideas:[]}),n("Generated ideas cleared.","info")};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("header",{className:"pb-4",children:[t.jsxs("h1",{className:"text-2xl md:text-3xl font-bold tracking-tight text-foreground dark:text-dark-foreground flex items-center",children:[t.jsx(_,{className:"h-7 w-7 md:h-8 md:w-8 mr-2 text-primary dark:text-dark-primary"}),"Idea Spark"]}),t.jsx("p",{className:"mt-1 text-muted-foreground dark:text-dark-muted-foreground",children:"Discover your next research project with detailed, AI-generated ideas."})]}),t.jsxs(v,{title:"Define Your Research Context",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsx(w,{label:"Academic Level",name:"academicLevel",options:U,value:a.academicLevel,onChange:e=>E({academicLevel:e.target.value})}),t.jsx(w,{label:"Project Scope",name:"projectScope",options:V,value:m,onChange:e=>$(e.target.value)}),t.jsx(w,{label:"Course / Field of Study",name:"selectedCourse",options:l,value:f,onChange:e=>{R(e.target.value),e.target.value==="Other..."?(S(!0),x("")):S(!1)},containerClassName:"md:col-span-2"}),Y&&t.jsx(A,{label:"Specify Course/Field",name:"customCourse",placeholder:"Enter your specific field",value:O,onChange:e=>x(e.target.value),containerClassName:"md:col-span-2 -mt-2"}),t.jsx(w,{label:"Geographic Region (Optional)",name:"selectedRegion",options:he,value:b,onChange:e=>{T(e.target.value),e.target.value==="Other..."?(y(!0),j("")):y(!1)}}),D&&t.jsx(A,{label:"Specify Region",name:"customRegion",placeholder:"Enter specific region",value:L,onChange:e=>j(e.target.value),containerClassName:"-mt-2"}),t.jsx(A,{label:"Current Research Trends (Optional)",name:"researchTrends",placeholder:"e.g., AI ethics, climate adaptation",value:C,onChange:e=>M(e.target.value),containerClassName:D?"":"md:col-start-2"}),t.jsx(A,{label:"Custom Keywords (Optional, comma-separated)",name:"customKeywords",containerClassName:"md:col-span-2",value:N,onChange:e=>F(e.target.value)})]}),t.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row justify-end gap-2",children:[c.length>0&&t.jsx(h,{onClick:ae,variant:"outline",disabled:d,children:"Clear Ideas Only"}),t.jsx(h,{onClick:te,variant:"outline",disabled:d,children:"Clear Form & Ideas"}),t.jsx(h,{onClick:X,isLoading:d,disabled:!i.trim(),children:"Generate Detailed Ideas"})]})]}),t.jsxs("div",{"aria-live":"polite","aria-busy":d,children:[d&&t.jsx(ce,{text:"Sparking brilliant ideas, hold tight..."}),G&&!d&&t.jsxs(v,{className:"bg-destructive/10 border-destructive text-destructive-foreground dark:bg-destructive/20 dark:text-destructive",children:[t.jsx("p",{className:"font-semibold",children:"Error Generating Ideas"}),t.jsx("p",{className:"text-sm",children:G})]}),!d&&c.length===0&&!G&&t.jsx(v,{children:t.jsxs("div",{className:"text-center py-10 text-muted-foreground dark:text-dark-muted-foreground",children:[t.jsx(_,{className:"h-12 w-12 mx-auto text-primary/30 dark:text-dark-primary/30 mb-4"}),t.jsx("p",{className:"font-semibold text-lg",children:"Ready to Spark Some Ideas?"}),t.jsx("p",{className:"text-sm",children:"Fill in your research context above and let AI help you brainstorm."})]})}),!d&&c.length>0&&t.jsx("div",{className:"space-y-6",children:t.jsxs(v,{children:[t.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 gap-2",children:[t.jsx("h2",{className:"text-xl md:text-2xl font-semibold text-foreground dark:text-dark-foreground",children:"Generated Project Ideas"}),t.jsxs("div",{className:"flex space-x-2 flex-shrink-0",children:[t.jsx(h,{onClick:Z,variant:"outline",size:"sm",children:"Download Ideas"}),t.jsx(h,{onClick:ee,variant:"outline",size:"sm",children:"Save to Google Drive"})]})]}),c.map((e,s)=>t.jsx(v,{title:e.title||`Idea ${s+1}`,className:"shadow-lg mb-4",children:t.jsxs("div",{className:"space-y-3 text-sm",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold text-foreground dark:text-dark-foreground",children:"Description:"}),t.jsx("p",{className:"text-muted-foreground dark:text-dark-muted-foreground whitespace-pre-line",children:e.description})]}),e.potentialResearchQuestion&&t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold text-foreground dark:text-dark-foreground",children:"Potential Research Question:"}),t.jsxs("p",{className:"text-muted-foreground dark:text-dark-muted-foreground italic",children:['"',e.potentialResearchQuestion,'"']})]}),e.suggestedMethodology&&t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold text-foreground dark:text-dark-foreground",children:"Suggested Methodology:"}),t.jsx("p",{className:"text-muted-foreground dark:text-dark-muted-foreground",children:e.suggestedMethodology})]}),e.keywords&&e.keywords.length>0&&t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold text-foreground dark:text-dark-foreground",children:"Keywords:"}),t.jsx("div",{className:"flex flex-wrap gap-1.5 mt-1",children:e.keywords.map(o=>t.jsx("span",{className:"px-2 py-0.5 bg-primary/10 text-primary dark:bg-dark-primary/20 dark:text-dark-primary text-xs rounded-full",children:o},o))})]}),t.jsxs("div",{className:"pt-2 border-t border-border dark:border-dark-border flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsxs("p",{className:"text-xs",children:[t.jsx("strong",{children:"Level:"})," ",e.level||a.academicLevel]}),e.scopeSuitability&&t.jsxs("p",{className:"text-xs",children:[t.jsx("strong",{children:"Scope Suitability:"})," ",e.scopeSuitability]})]}),t.jsx(ge,{textToShare:e.description,documentName:e.title,sourceFeatureName:"Idea Spark",buttonClassName:"ml-auto",menuPosition:"left"})]})]})},s))]})})]})]})};export{Ce as default};
