import{f as _,y as H,m as Q,v as o,k as X,S as Z,x as ee,i as te,u as t,B as A,a as i,l as ae,d as re}from"./index-CL7HjhdV.js";import{b as d}from"./Card-C8Vt2KLr-CXW7Tvcj.js";import{a as se}from"./geminiService-DJIPhCmJ-Bm2owfCC.js";import{i as b}from"./Select-COm5afdw-BbFkIx2B.js";import{c as oe}from"./downloadHelper-Y0t7dfPR--lPmL3re.js";import{a as m}from"./Input-gw2yEWz2-BvFam9MV.js";const ne=({className:s})=>t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:s||"w-5 h-5",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"})}),le=({className:s})=>t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:s||"w-5 h-5",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12.56 0c.342.052.682.107 1.022.166m0 0A48.11 48.11 0 0112 4.5c2.77 0 5.197.177 7.084.503M12 4.5v.75"})}),ie=[{name:"Concept Explainer",text:"Explain the concept of [specific concept, e.g., quantum entanglement] in simple terms for a beginner."},{name:"Research Questions",text:"Generate three potential research questions about [broad topic, e.g., climate change impacts on agriculture in West Africa]."},{name:"Abstract Draft",text:"Draft a short abstract (around 150 words) for a paper titled '[Your Tentative Paper Title]'."},{name:"Keyword Suggester",text:"Suggest five relevant keywords for a study on [your research area, e.g., artificial intelligence in healthcare diagnostics]."},{name:"Lit Review Outline",text:"Provide a brief outline for a literature review on [specific theme, e.g., the history of feminist theory]."},{name:"Compare & Contrast",text:"Compare and contrast [theory A, e.g., Keynesian economics] with [theory B, e.g., Monetarism]."},{name:"Methodology Challenges",text:"What are some common methodological challenges when researching [type of study, e.g., social media usage patterns]?"}],L="sharon-savedPrompts",xe=()=>{const{settings:s,updateSettings:c}=_(),{addToast:a}=H(),{openSaveToDriveModal:I}=Q(),[n,x]=o.useState(""),[l,j]=o.useState(""),[u,P]=o.useState(!1),[k,h]=o.useState(null),[p,g]=o.useState(""),[v,w]=o.useState([]),[y,W]=o.useState(.75),[N,$]=o.useState(40),[C,E]=o.useState(.95),[f,B]=o.useState(void 0);o.useEffect(()=>{try{const e=localStorage.getItem(L);e&&w(JSON.parse(e))}catch(e){console.error("Failed to load saved prompts:",e),a("Could not load saved prompts.","error")}},[a]);const F=Object.values(X).map(e=>({value:e,label:e})),M=Object.values(Z).map(e=>({value:e,label:e})),z=Object.values(ee).map(e=>({value:e,label:e})),D=Object.values(te).map(e=>({value:e,label:e})),G=e=>{x(e),g("")},K=o.useCallback(async()=>{if(!n.trim()){h("Please enter a prompt."),a("Prompt cannot be empty.","warning");return}P(!0),h(null),j("");const e={...s,temperature:y,topK:N,topP:C,thinkingBudget:f},r=await se(n,e);r.error?(h(r.error),a(r.error,"error")):(j(r.text),a("AI response received!","success")),P(!1)},[n,s,y,N,C,f,a]),R=()=>{if(!n.trim()){a("Cannot save an empty prompt.","warning");return}if(!p.trim()){a("Please enter a name for your prompt.","warning");return}const e={id:crypto.randomUUID(),name:p,text:n},r=[...v,e];w(r),localStorage.setItem(L,JSON.stringify(r)),a(`Prompt "${p}" saved!`,"success"),g("")},T=e=>{x(e.text),g(e.name),a(`Prompt "${e.name}" loaded.`,"info")},Y=e=>{const r=v.filter(S=>S.id!==e);w(r),localStorage.setItem(L,JSON.stringify(r)),a("Prompt deleted.","info")},O=(e,r)=>{const S=e.substring(0,30).replace(/[^\w\s-]/gi,"").replace(/\s+/g,"_")||"PromptLabOutput";return`${re} - PromptLab - ${S}.${r}`},q=()=>{if(!l){a("No output to download.","info");return}const e=O(n,"txt");oe(l,e),a("Output download initiated.","success")},J=()=>{if(!l){a("No output to save.","info");return}const e=O(n,"txt");I(l,e)},U=()=>{if(!l){a("Nothing to copy.","info");return}navigator.clipboard.writeText(l),a("Output copied to clipboard!","success")},V=()=>{x(""),j(""),g(""),h(null),a("Prompt and output cleared.","info")};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("header",{className:"pb-4",children:[t.jsxs("h1",{className:"text-2xl md:text-3xl font-bold tracking-tight text-foreground dark:text-dark-foreground flex items-center",children:[t.jsx(A,{className:"h-7 w-7 md:h-8 md:w-8 mr-2 text-primary dark:text-dark-primary"}),"Prompt Lab"]}),t.jsx("p",{className:"mt-1 text-muted-foreground dark:text-dark-muted-foreground",children:"Experiment with prompts, see direct AI responses, and save your favorites. Configure global settings below."})]}),t.jsx(d,{title:"Global AI Settings for Lab",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[t.jsx(b,{label:"Academic Level",name:"academicLevel",options:F,value:s.academicLevel,onChange:e=>c({academicLevel:e.target.value})}),t.jsx(b,{label:"Writing Tone",name:"writingTone",options:M,value:s.writingTone,onChange:e=>c({writingTone:e.target.value})}),t.jsx(b,{label:"Formatting Style (Guidance)",name:"formattingStyle",options:z,value:s.formattingStyle,onChange:e=>c({formattingStyle:e.target.value})}),t.jsx(m,{label:"Current Subject",name:"currentSubject",placeholder:"e.g., Physics, Literature",value:s.currentSubject||"",onChange:e=>c({currentSubject:e.target.value})}),t.jsx(b,{label:"Project Scope",name:"projectScope",options:D,value:s.projectScope,onChange:e=>c({projectScope:e.target.value})}),t.jsx(m,{label:"Target Word Count",name:"targetWordCount",type:"number",placeholder:"e.g., 500",value:s.targetWordCount===void 0?"":s.targetWordCount,onChange:e=>c({targetWordCount:e.target.value?parseInt(e.target.value,10):void 0})})]})}),t.jsxs(d,{title:"Model Configuration (Optional)",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[t.jsx(m,{label:"Temperature (0-1)",type:"number",step:"0.05",min:"0",max:"1",value:y,onChange:e=>W(parseFloat(e.target.value))}),t.jsx(m,{label:"Top-K (Integer)",type:"number",step:"1",min:"1",value:N,onChange:e=>$(parseInt(e.target.value))}),t.jsx(m,{label:"Top-P (0-1)",type:"number",step:"0.05",min:"0",max:"1",value:C,onChange:e=>E(parseFloat(e.target.value))}),t.jsx(m,{label:"Thinking Budget (0-1, Flash Only)",type:"number",step:"0.05",min:"0",max:"1",value:f===void 0?"":f,onChange:e=>B(e.target.value===""?void 0:parseFloat(e.target.value)),title:"0 disables thinking (low latency), omit for default (higher quality)."})]}),t.jsx("p",{className:"text-xs text-muted-foreground dark:text-dark-muted-foreground mt-2",children:'Adjust these for more fine-grained control. For "Thinking Budget", 0 usually means lower latency (Flash model specific).'})]}),t.jsxs(d,{title:"Enter Your Prompt",children:[t.jsxs("div",{className:"mb-3",children:[t.jsx("label",{className:"block text-sm font-medium text-foreground dark:text-dark-foreground mb-1.5",children:"Example Prompts:"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:ie.map((e,r)=>t.jsx(i,{variant:"outline",size:"sm",onClick:()=>G(e.text),className:"text-xs",title:e.text,children:e.name},r))})]}),t.jsx("textarea",{value:n,onChange:e=>x(e.target.value),rows:5,className:"w-full p-2.5 border rounded-md focus:ring-2 focus:ring-primary dark:focus:ring-dark-primary focus:border-transparent bg-background dark:bg-dark-input dark:border-dark-border dark:text-dark-foreground dark:placeholder-dark-muted-foreground transition-all",placeholder:"Type your detailed prompt here...","aria-label":"Prompt input"}),t.jsxs("div",{className:"mt-4 flex flex-col sm:flex-row items-center gap-2 justify-between",children:[t.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[t.jsx(m,{name:"promptName",placeholder:"Name this prompt to save",value:p,onChange:e=>g(e.target.value),className:"flex-grow sm:min-w-[200px] h-9"}),t.jsxs(i,{onClick:R,variant:"outline",size:"sm",title:"Save current prompt",disabled:!n.trim()||!p.trim(),className:"h-9",children:[t.jsx(ne,{className:"h-4 w-4 mr-1.5"})," Save"]})]}),t.jsxs("div",{className:"flex gap-2 w-full sm:w-auto justify-end",children:[t.jsx(i,{onClick:V,variant:"outline",className:"h-9",children:"Clear"}),t.jsx(i,{onClick:K,isLoading:u,disabled:!n.trim(),className:"h-9",children:"Send Prompt"})]})]})]}),v.length>0&&t.jsx(d,{title:"Your Saved Prompts",children:t.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto pr-2",children:v.map(e=>t.jsxs("div",{className:"flex items-center justify-between p-2.5 border rounded-md bg-muted/30 dark:bg-dark-muted/30 border-border dark:border-dark-border hover:shadow-sm transition-shadow",children:[t.jsxs("div",{className:"flex-grow cursor-pointer mr-2",onClick:()=>T(e),title:`Load: ${e.name}`,children:[t.jsx("p",{className:"text-sm font-medium text-foreground dark:text-dark-foreground",children:e.name}),t.jsx("p",{className:"text-xs text-muted-foreground dark:text-dark-muted-foreground truncate",title:e.text,children:e.text})]}),t.jsxs("div",{className:"flex-shrink-0",children:[t.jsx(i,{onClick:()=>T(e),variant:"ghost",size:"sm",title:"Load this prompt",className:"p-1.5 text-primary hover:bg-primary/10",children:"Load"}),t.jsx(i,{onClick:()=>Y(e.id),variant:"ghost",size:"icon",title:"Delete this prompt",className:"ml-1 p-1.5 text-destructive hover:bg-destructive/10",children:t.jsx(le,{className:"h-4 w-4"})})]})]},e.id))})}),t.jsxs("div",{"aria-live":"polite","aria-busy":u,children:[u&&t.jsx(ae,{text:"AI is crafting a response..."}),k&&!u&&t.jsxs(d,{className:"bg-destructive/10 border-destructive text-destructive-foreground dark:bg-destructive/20 dark:text-destructive",children:[t.jsx("p",{className:"font-semibold",children:"Error"}),t.jsx("p",{className:"text-sm",children:k})]}),!u&&!l&&!k&&!n.trim()&&t.jsx(d,{children:t.jsxs("div",{className:"text-center py-10 text-muted-foreground dark:text-dark-muted-foreground",children:[t.jsx(A,{className:"h-12 w-12 mx-auto text-primary/30 dark:text-dark-primary/30 mb-4"}),t.jsx("p",{className:"font-semibold text-lg",children:"Ready to Experiment"}),t.jsx("p",{className:"text-sm",children:"Enter a prompt, select an example, or load a saved prompt to get started."})]})}),!u&&l&&t.jsxs(d,{title:"AI Response",children:[t.jsx("pre",{className:"whitespace-pre-wrap p-4 bg-muted/50 dark:bg-dark-muted/50 rounded-md text-sm text-foreground dark:text-dark-foreground overflow-x-auto min-h-[100px]",children:l}),t.jsxs("div",{className:"mt-4 flex flex-wrap gap-2 justify-end",children:[t.jsx(i,{onClick:U,variant:"outline",size:"sm",children:"Copy Output"}),t.jsx(i,{onClick:q,variant:"outline",size:"sm",children:"Download .txt"}),t.jsx(i,{onClick:J,variant:"outline",size:"sm",children:"Save to Google Drive"})]})]})]})]})};export{xe as default};
