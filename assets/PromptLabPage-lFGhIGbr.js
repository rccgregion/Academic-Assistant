import{j as t,l as H,q as Q,m as X,r as s,s as Z,W as ee,F as te,p as ae,S as A,c as i,t as re,a as oe}from"./index-DwfKsHWR.js";import{C as d}from"./Card-BP-gc27O.js";import{g as se}from"./geminiService-BkXzVexN.js";import{S as j}from"./Select-B8-KE8W5.js";import{d as ne}from"./downloadHelper-Y0t7dfPR.js";import{I as c}from"./Input-CaI1NqfY.js";const le=({className:o})=>t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:o||"w-5 h-5",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"})}),ie=({className:o})=>t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:o||"w-5 h-5",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12.56 0c.342.052.682.107 1.022.166m0 0A48.11 48.11 0 0112 4.5c2.77 0 5.197.177 7.084.503M12 4.5v.75"})}),de=[{name:"Concept Explainer",text:"Explain the concept of [specific concept, e.g., quantum entanglement] in simple terms for a beginner."},{name:"Research Questions",text:"Generate three potential research questions about [broad topic, e.g., climate change impacts on agriculture in West Africa]."},{name:"Abstract Draft",text:"Draft a short abstract (around 150 words) for a paper titled '[Your Tentative Paper Title]'."},{name:"Keyword Suggester",text:"Suggest five relevant keywords for a study on [your research area, e.g., artificial intelligence in healthcare diagnostics]."},{name:"Lit Review Outline",text:"Provide a brief outline for a literature review on [specific theme, e.g., the history of feminist theory]."},{name:"Compare & Contrast",text:"Compare and contrast [theory A, e.g., Keynesian economics] with [theory B, e.g., Monetarism]."},{name:"Methodology Challenges",text:"What are some common methodological challenges when researching [type of study, e.g., social media usage patterns]?"}],C="sharon-savedPrompts",he=()=>{const{settings:o,updateSettings:m}=H(),{addToast:a}=Q(),{openSaveToDriveModal:I}=X(),[n,x]=s.useState(""),[l,b]=s.useState(""),[u,P]=s.useState(!1),[k,h]=s.useState(null),[p,g]=s.useState(""),[v,w]=s.useState([]),[y,E]=s.useState(.75),[S,F]=s.useState(40),[N,W]=s.useState(.95),[f,D]=s.useState(void 0);s.useEffect(()=>{try{const e=localStorage.getItem(C);e&&w(JSON.parse(e))}catch(e){console.error("Failed to load saved prompts:",e),a("Could not load saved prompts.","error")}},[a]);const M=Object.values(Z).map(e=>({value:e,label:e})),B=Object.values(ee).map(e=>({value:e,label:e})),z=Object.values(te).map(e=>({value:e,label:e})),R=Object.values(ae).map(e=>({value:e,label:e})),G=e=>{x(e),g("")},K=s.useCallback(async()=>{if(!n.trim()){h("Please enter a prompt."),a("Prompt cannot be empty.","warning");return}P(!0),h(null),b("");const e={...o,temperature:y,topK:S,topP:N,thinkingBudget:f},r=await se(n,e);r.error?(h(r.error),a(r.error,"error")):(b(r.text),a("AI response received!","success")),P(!1)},[n,o,y,S,N,f,a]),$=()=>{if(!n.trim()){a("Cannot save an empty prompt.","warning");return}if(!p.trim()){a("Please enter a name for your prompt.","warning");return}const e={id:crypto.randomUUID(),name:p,text:n},r=[...v,e];w(r),localStorage.setItem(C,JSON.stringify(r)),a(`Prompt "${p}" saved!`,"success"),g("")},L=e=>{x(e.text),g(e.name),a(`Prompt "${e.name}" loaded.`,"info")},_=e=>{const r=v.filter(O=>O.id!==e);w(r),localStorage.setItem(C,JSON.stringify(r)),a("Prompt deleted.","info")},T=(e,r)=>{const V=e.substring(0,30).replace(/[^\w\s-]/gi,"").replace(/\s+/g,"_")||"PromptLabOutput";return`${oe} - PromptLab - ${V}.${r}`},q=()=>{if(!l){a("No output to download.","info");return}const e=T(n,"txt");ne(l,e),a("Output download initiated.","success")},Y=()=>{if(!l){a("No output to save.","info");return}const e=T(n,"txt");I(l,e)},J=()=>{if(!l){a("Nothing to copy.","info");return}navigator.clipboard.writeText(l),a("Output copied to clipboard!","success")},U=()=>{x(""),b(""),g(""),h(null),a("Prompt and output cleared.","info")};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("header",{className:"pb-4",children:[t.jsxs("h1",{className:"text-2xl md:text-3xl font-bold tracking-tight text-foreground dark:text-dark-foreground flex items-center",children:[t.jsx(A,{className:"h-7 w-7 md:h-8 md:w-8 mr-2 text-primary dark:text-dark-primary"}),"Prompt Lab"]}),t.jsx("p",{className:"mt-1 text-muted-foreground dark:text-dark-muted-foreground",children:"Experiment with prompts, see direct AI responses, and save your favorites. Configure global settings below."})]}),t.jsx(d,{title:"Global AI Settings for Lab",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[t.jsx(j,{label:"Academic Level",name:"academicLevel",options:M,value:o.academicLevel,onChange:e=>m({academicLevel:e.target.value})}),t.jsx(j,{label:"Writing Tone",name:"writingTone",options:B,value:o.writingTone,onChange:e=>m({writingTone:e.target.value})}),t.jsx(j,{label:"Formatting Style (Guidance)",name:"formattingStyle",options:z,value:o.formattingStyle,onChange:e=>m({formattingStyle:e.target.value})}),t.jsx(c,{label:"Current Subject",name:"currentSubject",placeholder:"e.g., Physics, Literature",value:o.currentSubject||"",onChange:e=>m({currentSubject:e.target.value})}),t.jsx(j,{label:"Project Scope",name:"projectScope",options:R,value:o.projectScope,onChange:e=>m({projectScope:e.target.value})}),t.jsx(c,{label:"Target Word Count",name:"targetWordCount",type:"number",placeholder:"e.g., 500",value:o.targetWordCount===void 0?"":o.targetWordCount,onChange:e=>m({targetWordCount:e.target.value?parseInt(e.target.value,10):void 0})})]})}),t.jsxs(d,{title:"Model Configuration (Optional)",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[t.jsx(c,{label:"Temperature (0-1)",type:"number",step:"0.05",min:"0",max:"1",value:y,onChange:e=>E(parseFloat(e.target.value))}),t.jsx(c,{label:"Top-K (Integer)",type:"number",step:"1",min:"1",value:S,onChange:e=>F(parseInt(e.target.value))}),t.jsx(c,{label:"Top-P (0-1)",type:"number",step:"0.05",min:"0",max:"1",value:N,onChange:e=>W(parseFloat(e.target.value))}),t.jsx(c,{label:"Thinking Budget (0-1, Flash Only)",type:"number",step:"0.05",min:"0",max:"1",value:f===void 0?"":f,onChange:e=>D(e.target.value===""?void 0:parseFloat(e.target.value)),title:"0 disables thinking (low latency), omit for default (higher quality)."})]}),t.jsx("p",{className:"text-xs text-muted-foreground dark:text-dark-muted-foreground mt-2",children:'Adjust these for more fine-grained control. For "Thinking Budget", 0 usually means lower latency (Flash model specific).'})]}),t.jsxs(d,{title:"Enter Your Prompt",children:[t.jsxs("div",{className:"mb-3",children:[t.jsx("label",{className:"block text-sm font-medium text-foreground dark:text-dark-foreground mb-1.5",children:"Example Prompts:"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:de.map((e,r)=>t.jsx(i,{variant:"outline",size:"sm",onClick:()=>G(e.text),className:"text-xs",title:e.text,children:e.name},r))})]}),t.jsx("textarea",{value:n,onChange:e=>x(e.target.value),rows:5,className:"w-full p-2.5 border rounded-md focus:ring-2 focus:ring-primary dark:focus:ring-dark-primary focus:border-transparent bg-background dark:bg-dark-input dark:border-dark-border dark:text-dark-foreground dark:placeholder-dark-muted-foreground transition-all",placeholder:"Type your detailed prompt here...","aria-label":"Prompt input"}),t.jsxs("div",{className:"mt-4 flex flex-col sm:flex-row items-center gap-2 justify-between",children:[t.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[t.jsx(c,{name:"promptName",placeholder:"Name this prompt to save",value:p,onChange:e=>g(e.target.value),className:"flex-grow sm:min-w-[200px] h-9"}),t.jsxs(i,{onClick:$,variant:"outline",size:"sm",title:"Save current prompt",disabled:!n.trim()||!p.trim(),className:"h-9",children:[t.jsx(le,{className:"h-4 w-4 mr-1.5"})," Save"]})]}),t.jsxs("div",{className:"flex gap-2 w-full sm:w-auto justify-end",children:[t.jsx(i,{onClick:U,variant:"outline",className:"h-9",children:"Clear"}),t.jsx(i,{onClick:K,isLoading:u,disabled:!n.trim(),className:"h-9",children:"Send Prompt"})]})]})]}),v.length>0&&t.jsx(d,{title:"Your Saved Prompts",children:t.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto pr-2",children:v.map(e=>t.jsxs("div",{className:"flex items-center justify-between p-2.5 border rounded-md bg-muted/30 dark:bg-dark-muted/30 border-border dark:border-dark-border hover:shadow-sm transition-shadow",children:[t.jsxs("div",{className:"flex-grow cursor-pointer mr-2",onClick:()=>L(e),title:`Load: ${e.name}`,children:[t.jsx("p",{className:"text-sm font-medium text-foreground dark:text-dark-foreground",children:e.name}),t.jsx("p",{className:"text-xs text-muted-foreground dark:text-dark-muted-foreground truncate",title:e.text,children:e.text})]}),t.jsxs("div",{className:"flex-shrink-0",children:[t.jsx(i,{onClick:()=>L(e),variant:"ghost",size:"sm",title:"Load this prompt",className:"p-1.5 text-primary hover:bg-primary/10",children:"Load"}),t.jsx(i,{onClick:()=>_(e.id),variant:"ghost",size:"icon",title:"Delete this prompt",className:"ml-1 p-1.5 text-destructive hover:bg-destructive/10",children:t.jsx(ie,{className:"h-4 w-4"})})]})]},e.id))})}),t.jsxs("div",{"aria-live":"polite","aria-busy":u,children:[u&&t.jsx(re,{text:"AI is crafting a response..."}),k&&!u&&t.jsxs(d,{className:"bg-destructive/10 border-destructive text-destructive-foreground dark:bg-destructive/20 dark:text-destructive",children:[t.jsx("p",{className:"font-semibold",children:"Error"}),t.jsx("p",{className:"text-sm",children:k})]}),!u&&!l&&!k&&!n.trim()&&t.jsx(d,{children:t.jsxs("div",{className:"text-center py-10 text-muted-foreground dark:text-dark-muted-foreground",children:[t.jsx(A,{className:"h-12 w-12 mx-auto text-primary/30 dark:text-dark-primary/30 mb-4"}),t.jsx("p",{className:"font-semibold text-lg",children:"Ready to Experiment"}),t.jsx("p",{className:"text-sm",children:"Enter a prompt, select an example, or load a saved prompt to get started."})]})}),!u&&l&&t.jsxs(d,{title:"AI Response",children:[t.jsx("pre",{className:"whitespace-pre-wrap p-4 bg-muted/50 dark:bg-dark-muted/50 rounded-md text-sm text-foreground dark:text-dark-foreground overflow-x-auto min-h-[100px]",children:l}),t.jsxs("div",{className:"mt-4 flex flex-wrap gap-2 justify-end",children:[t.jsx(i,{onClick:J,variant:"outline",size:"sm",children:"Copy Output"}),t.jsx(i,{onClick:q,variant:"outline",size:"sm",children:"Download .txt"}),t.jsx(i,{onClick:Y,variant:"outline",size:"sm",children:"Save to Google Drive"})]})]})]})]})};export{he as default};
