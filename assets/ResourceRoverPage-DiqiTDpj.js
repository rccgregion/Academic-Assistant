import{l as v,r as n,q as N,j as e,k as p,c as g,t as b}from"./index-Cf9C7PVC.js";import{I as k}from"./Input-gw2yEWz2.js";import{C as u}from"./Card-C8Vt2KLr.js";import{g as w}from"./geminiService-DJIPhCmJ.js";const q=()=>{const{settings:l}=v(),[s,h]=n.useState(""),[r,m]=n.useState(null),[a,f]=n.useState(!1),[x,d]=n.useState(null),{addToast:i}=N(),j=n.useCallback(async()=>{if(!s.trim()){d("Please enter a search query."),i("Please enter a search query.","warning");return}f(!0),d(null),m(null);let t=`Find academic resources and information about: "${s}". 
    Provide a concise summary of the findings and list relevant sources. 
    Focus on information that would be useful for a ${l.academicLevel} student.
    If the query is about recent events or requires up-to-date information, prioritize that.`;l.geographicRegion==="Nigeria"&&(t+=`
Strongly prioritize Nigerian journals, university e-libraries, local research databases (e.g., NUC resources, TEEAL if relevant), and open access African journals in your search and sourced information.`);const o=await w(t,{...l,useGrounding:!0});o.error?(d(o.error),i(o.error,"error")):(m({text:o.text,sources:o.sources}),i("Search complete!","success")),f(!1)},[s,l,i]),y=()=>{h(""),m(null),d(null),i("Search cleared.","info")};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("header",{className:"pb-4",children:[e.jsxs("h1",{className:"text-2xl md:text-3xl font-bold tracking-tight text-foreground dark:text-dark-foreground flex items-center",children:[e.jsx(p,{className:"h-7 w-7 md:h-8 md:w-8 mr-2 text-primary dark:text-dark-primary"}),"Resource Rover"]}),e.jsx("p",{className:"mt-1 text-muted-foreground dark:text-dark-muted-foreground",children:"Discover academic articles, papers, and information using AI-powered search with web grounding."})]}),e.jsx(u,{title:"Search for Academic Resources",children:e.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2 items-end",children:[e.jsx(k,{label:"Search Query",id:"searchQuery",placeholder:"e.g., 'latest advancements in renewable energy storage', 'effects of social media on adolescent psychology'",value:s,onChange:t=>h(t.target.value),containerClassName:"flex-grow"}),e.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[s&&e.jsx(g,{onClick:y,variant:"outline",disabled:a,className:"h-10 w-full sm:w-auto",children:"Clear"}),e.jsx(g,{onClick:j,isLoading:a,disabled:!s.trim(),className:"h-10 w-full sm:w-auto",children:"Search"})]})]})}),e.jsxs("div",{"aria-live":"polite","aria-busy":a,children:[a&&e.jsx(b,{text:"Rover is searching the web for academic resources..."}),x&&!a&&e.jsxs(u,{className:"bg-destructive/10 border-destructive text-destructive-foreground dark:bg-destructive/20 dark:text-destructive",children:[e.jsx("p",{className:"font-semibold",children:"Error"}),e.jsx("p",{className:"text-sm",children:x})]}),!a&&!r&&!x&&!s.trim()&&e.jsx(u,{children:e.jsxs("div",{className:"text-center py-10 text-muted-foreground dark:text-dark-muted-foreground",children:[e.jsx(p,{className:"h-12 w-12 mx-auto text-primary/30 dark:text-dark-primary/30 mb-4"}),e.jsx("p",{className:"font-semibold text-lg",children:"Ready to Explore?"}),e.jsx("p",{className:"text-sm",children:"Enter your search query above to find academic resources."})]})}),!a&&r&&e.jsxs(u,{title:"Search Results",children:[e.jsxs("div",{className:"prose prose-sm dark:prose-invert max-w-none",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Summary:"}),e.jsx("p",{className:"text-muted-foreground dark:text-dark-muted-foreground whitespace-pre-wrap",children:r.text||"No summary provided."})]}),r.sources&&r.sources.length>0&&e.jsxs("div",{className:"mt-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Sources:"}),e.jsx("ul",{className:"list-disc list-inside space-y-2",children:r.sources.map((t,o)=>{const c=t.web||t.retrievedContext;return!c||!c.uri?null:e.jsx("li",{className:"text-sm",children:e.jsx("a",{href:c.uri,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline dark:text-dark-primary break-all",children:c.title||c.uri})},o)})})]}),(!r.sources||r.sources.length===0)&&e.jsx("p",{className:"mt-4 text-sm text-muted-foreground dark:text-dark-muted-foreground",children:"No specific web sources were cited for this summary."})]})]})]})};export{q as default};
