import{j as a,r as t,w as R,o as A,q as N,u as P,c as S}from"./index-DwfKsHWR.js";const z=({className:c})=>a.jsx("svg",{className:c,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5"})}),O=[{path:"/idea-spark",name:"Idea Spark"},{path:"/docu-craft",name:"DocuCraft"},{path:"/stealth-writer",name:"StealthWriter"},{path:"/prompt-lab",name:"Prompt Lab"},{path:"/professor-ai",name:"Professor AI"},{path:"/resource-rover",name:"Resource Rover"},{path:"/paper-analyzer",name:"Paper Analyzer"},{path:"/integrity-guard",name:"IntegrityGuard"},{path:"/viva-voce-prep",name:"Viva Voce Prep"},{path:"/presentation-crafter",name:"Presentation Crafter"},{path:"/insight-weaver",name:"InsightWeaver"},{path:"/document-lab",name:"Document Lab"}],B=({textToShare:c,documentName:y,sourceFeatureName:p,buttonClassName:j="",menuPosition:k="right"})=>{var T;const[r,x]=t.useState(!1),D=R(),C=A(),f=t.useRef(null),s=t.useRef(null),{addToast:b}=N(),{t:i}=P(),[n,u]=t.useState(-1),m=t.useRef([]),I=C.pathname,o=O.filter(e=>e.path!==I),v=t.useCallback(()=>{x(e=>!e),r||u(0)},[r]),d=t.useCallback(()=>{var e;x(!1),u(-1),(e=s.current)==null||e.focus()},[]),h=t.useCallback(e=>{r&&f.current&&!f.current.contains(e.target)&&s.current&&!s.current.contains(e.target)&&d()},[r,d]);t.useEffect(()=>(document.addEventListener("mousedown",h),()=>{document.removeEventListener("mousedown",h)}),[h]),t.useEffect(()=>{var e;r&&n>=0&&m.current[n]&&((e=m.current[n])==null||e.focus())},[r,n]);const w=e=>{if(!c){b(i("sendToTool.toast_noText",{sourceFeatureName:p}),"warning"),d();return}D(e.path,{state:{initialText:c,documentName:y,sourceFeatureName:p}}),b(i("sendToTool.toast_sent",{sourceFeatureName:p,toolName:e.name}),"info"),d()},E=e=>{if(!r){(e.key==="Enter"||e.key===" ")&&(e.preventDefault(),v());return}switch(e.key){case"Escape":d();break;case"ArrowDown":e.preventDefault(),u(l=>(l+1)%o.length);break;case"ArrowUp":e.preventDefault(),u(l=>(l-1+o.length)%o.length);break;case"Enter":case" ":e.preventDefault(),n>=0&&o[n]&&w(o[n]);break}};let g="right-0";return k==="left"?g="left-0":k==="center"&&(g="left-1/2 -translate-x-1/2"),a.jsxs("div",{className:"relative inline-block text-left",onKeyDown:E,children:[a.jsx(S,{ref:s,variant:"ghost",size:"sm",onClick:v,className:`p-1.5 text-muted-foreground hover:text-primary dark:text-dark-muted-foreground dark:hover:text-dark-primary transition-colors ${j}`,"aria-label":i("sendToTool.buttonAria"),"aria-haspopup":"true","aria-expanded":r,title:i("sendToTool.buttonTitle"),children:a.jsx(z,{className:"h-4 w-4"})}),r&&a.jsx("div",{ref:f,className:`absolute z-50 mt-2 w-56 origin-top-right rounded-md bg-card dark:bg-dark-card shadow-lg ring-1 ring-border dark:ring-dark-border focus:outline-none ${g} animate-scaleIn`,role:"menu","aria-orientation":"vertical","aria-labelledby":((T=s.current)==null?void 0:T.id)||void 0,children:a.jsx("div",{className:"py-1",role:"none",children:o.length>0?o.map((e,l)=>a.jsx("button",{ref:L=>{m.current[l]=L},onClick:()=>w(e),className:"w-full text-left block px-4 py-2 text-sm text-card-foreground dark:text-dark-card-foreground hover:bg-muted dark:hover:bg-dark-muted hover:text-primary dark:hover:text-dark-primary focus:bg-muted dark:focus:bg-dark-muted focus:outline-none focus:ring-1 focus:ring-ring dark:focus:ring-dark-ring transition-colors rounded-sm",role:"menuitem",tabIndex:-1,children:e.name},e.path)):a.jsx("p",{className:"px-4 py-2 text-sm text-muted-foreground dark:text-dark-muted-foreground",children:i("sendToTool.noTools")})})})]})};export{B as S};
