import{v as r,p as I,h as z,y as A,V as P,u as a,a as R}from"./index-CL7HjhdV.js";const S=({className:d})=>a.jsx("svg",{className:d,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5"})}),V=[{path:"/idea-spark",name:"Idea Spark"},{path:"/docu-craft",name:"DocuCraft"},{path:"/stealth-writer",name:"StealthWriter"},{path:"/prompt-lab",name:"Prompt Lab"},{path:"/professor-ai",name:"Professor AI"},{path:"/resource-rover",name:"Resource Rover"},{path:"/paper-analyzer",name:"Paper Analyzer"},{path:"/integrity-guard",name:"IntegrityGuard"},{path:"/viva-voce-prep",name:"Viva Voce Prep"},{path:"/presentation-crafter",name:"Presentation Crafter"},{path:"/insight-weaver",name:"InsightWeaver"},{path:"/document-lab",name:"Document Lab"}],$=({textToShare:d,documentName:N,sourceFeatureName:m,buttonClassName:T="",menuPosition:k="right"})=>{var v;const[t,x]=r.useState(!1),j=I(),C=z(),p=r.useRef(null),s=r.useRef(null),{addToast:b}=A(),{t:u}=P(),[n,c]=r.useState(-1),h=r.useRef([]),D=C.pathname,o=V.filter(e=>e.path!==D),w=r.useCallback(()=>{x(e=>!e),t||c(0)},[t]),l=r.useCallback(()=>{var e;x(!1),c(-1),(e=s.current)==null||e.focus()},[]),f=r.useCallback(e=>{t&&p.current&&!p.current.contains(e.target)&&s.current&&!s.current.contains(e.target)&&l()},[t,l]);r.useEffect(()=>(document.addEventListener("mousedown",f),()=>{document.removeEventListener("mousedown",f)}),[f]),r.useEffect(()=>{var e;t&&n>=0&&h.current[n]&&((e=h.current[n])==null||e.focus())},[t,n]);const y=e=>{if(!d){b(u("sendToTool.toast_noText",{sourceFeatureName:m}),"warning"),l();return}j(e.path,{state:{initialText:d,documentName:N,sourceFeatureName:m}}),b(u("sendToTool.toast_sent",{sourceFeatureName:m,toolName:e.name}),"info"),l()},E=e=>{if(!t){(e.key==="Enter"||e.key===" ")&&(e.preventDefault(),w());return}switch(e.key){case"Escape":l();break;case"ArrowDown":e.preventDefault(),c(i=>(i+1)%o.length);break;case"ArrowUp":e.preventDefault(),c(i=>(i-1+o.length)%o.length);break;case"Enter":case" ":e.preventDefault(),n>=0&&o[n]&&y(o[n]);break}};let g="right-0";return k==="left"?g="left-0":k==="center"&&(g="left-1/2 -translate-x-1/2"),a.jsxs("div",{className:"relative inline-block text-left",onKeyDown:E,children:[a.jsx(R,{ref:s,variant:"ghost",size:"sm",onClick:w,className:`p-1.5 text-muted-foreground hover:text-primary dark:text-dark-muted-foreground dark:hover:text-dark-primary transition-colors ${T}`,"aria-label":u("sendToTool.buttonAria"),"aria-haspopup":"true","aria-expanded":t,title:u("sendToTool.buttonTitle"),children:a.jsx(S,{className:"h-4 w-4"})}),t&&a.jsx("div",{ref:p,className:`absolute z-50 mt-2 w-56 origin-top-right rounded-md bg-card dark:bg-dark-card shadow-lg ring-1 ring-border dark:ring-dark-border focus:outline-none ${g} animate-scaleIn`,role:"menu","aria-orientation":"vertical","aria-labelledby":((v=s.current)==null?void 0:v.id)||void 0,children:a.jsx("div",{className:"py-1",role:"none",children:o.length>0?o.map((e,i)=>a.jsx("button",{ref:L=>{h.current[i]=L},onClick:()=>y(e),className:"w-full text-left block px-4 py-2 text-sm text-card-foreground dark:text-dark-card-foreground hover:bg-muted dark:hover:bg-dark-muted hover:text-primary dark:hover:text-dark-primary focus:bg-muted dark:focus:bg-dark-muted focus:outline-none focus:ring-1 focus:ring-ring dark:focus:ring-dark-ring transition-colors rounded-sm",role:"menuitem",tabIndex:-1,children:e.name},e.path)):a.jsx("p",{className:"px-4 py-2 text-sm text-muted-foreground dark:text-dark-muted-foreground",children:u("sendToTool.noTools")})})})]})};export{$ as B};
