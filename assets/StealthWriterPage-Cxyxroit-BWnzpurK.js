import{f as _,h as P,y as U,m as B,v as s,S as C,u as e,R as L,l as G,a as d,B as Y,d as Z}from"./index-CL7HjhdV.js";import{i as S}from"./Select-COm5afdw-BbFkIx2B.js";import{b as g}from"./Card-C8Vt2KLr-CXW7Tvcj.js";import{a as V}from"./geminiService-DJIPhCmJ-Bm2owfCC.js";import{c as q}from"./downloadHelper-Y0t7dfPR--lPmL3re.js";import{B as J}from"./SendToToolDropdown-Cjarm4cS-CpHPl3Ve.js";import{o as K,v as Q}from"./ThumbsDownIcon-DnGwiL1i-BMCEM19-.js";var $=(r=>(r.HUMANIZE_SUBTLE="Subtle Humanization",r.HUMANIZE_MODERATE="Moderate Humanization",r.HUMANIZE_STRONG="Strong Humanization",r.IMPROVE_CLARITY="Improve Clarity & Flow",r.CHANGE_TONE="Change Tone",r.CUSTOM="Custom Instructions",r))($||{});const se=()=>{const{settings:r,updateSettings:R}=_(),i=P(),{addToast:a}=U(),{openSaveToDriveModal:I}=B(),[c,h]=s.useState(""),[n,p]=s.useState(""),[l,z]=s.useState("Moderate Humanization"),[x,b]=s.useState(""),[u,f]=s.useState(!1),[k,v]=s.useState(null),[w,y]=s.useState(void 0),[j,N]=s.useState(void 0);s.useEffect(()=>{var t;if((t=i.state)!=null&&t.initialText){h(i.state.initialText),i.state.documentName&&y(i.state.documentName),i.state.sourceFeatureName&&N(i.state.sourceFeatureName);const m=i.state.sourceFeatureName?` from ${i.state.sourceFeatureName}`:" from previous tool",o=i.state.documentName?` for "${i.state.documentName}"`:"";a(`Text loaded${m}${o} into StealthWriter.`,"info"),i.state.sourceFeatureName&&window.history.replaceState({},document.title)}},[i.state,a]);const M=Object.values($).map(t=>({value:t,label:t})),O=Object.values(C).map(t=>({value:t,label:t})),E=s.useCallback(async()=>{if(!c.trim()){a("Input text is empty. Please enter text to rewrite.","warning");return}f(!0),v(null),p("");let t="";switch(l){case"Subtle Humanization":t=`The goal is to subtly vary sentence structures and vocabulary to make the text sound more natural and less like typical AI output. Focus on minor alterations that enhance readability and flow while strictly preserving the original meaning and information. Maintain a ${r.writingTone} tone.`;break;case"Moderate Humanization":t=`The goal is to moderately rewrite the text to enhance its human-like qualities and reduce AI detection characteristics. Employ a wider range of sentence structures, synonyms, and phrasing. Ensure the original meaning, key information, and arguments are accurately preserved. Maintain a ${r.writingTone} tone.`;break;case"Strong Humanization":t=`The goal is to significantly rewrite the text to maximize its natural, human-authored feel and minimize AI detection probability. This may involve more substantial paraphrasing, rephrasing of complex sentences, and diverse vocabulary usage. Critically, the core meaning, all essential information, and logical flow must be meticulously preserved. Maintain a ${r.writingTone} tone.`;break;case"Improve Clarity & Flow":t=`The goal is to improve clarity, conciseness, logical flow, and overall readability. Simplify complex sentences, remove jargon where possible (or explain it if essential), and ensure the core message is conveyed effectively. Maintain a ${r.writingTone} tone.`;break;case"Change Tone":t=`Change the tone of the text to ${r.writingTone}. Ensure the meaning is preserved while adapting the language, style, and attitude to reflect the new tone.`;break;case"Custom Instructions":if(!x.trim()){a("Custom instructions are empty.","warning"),f(!1);return}t=`Follow these specific instructions for rewriting: "${x}". Maintain a ${r.writingTone} tone unless specified otherwise in the custom instructions.`;break}const m=`Original text:
"""
${c}
"""

Rewrite Action: ${l}
${t}

Output ONLY the rewritten text. Do not include any preambles, apologies, or explanations about your process.`,o=await V("",{...r,customPromptOverride:m});o.error?(v(o.error),a(o.error,"error")):(p(o.text),a(`Text rewritten successfully using ${l}!`,"success")),f(!1)},[c,l,r,x,a]),T=(t,m)=>{const o=t.replace(/[^\w\s-]/gi,"").replace(/\s+/g,"_")||"RewrittenText";return`${Z} - StealthWriter - ${o}.${m}`},F=()=>{if(!n){a("Nothing to copy.","info");return}navigator.clipboard.writeText(n),a("Rewritten text copied to clipboard!","success")},A=()=>{if(!n){a("No rewritten text to download.","info");return}const t=T(w||"StealthWriterOutput","txt");q(n,t),a("Rewritten text download initiated.","success")},H=()=>{if(!n){a("No rewritten text to save.","info");return}const t=T(w||"StealthWriterOutput","txt");I(n,t)},W=()=>{h(""),p(""),b(""),y(void 0),N(void 0),v(null),a("Input and output cleared.","info")},D=w||"Rewritten Text";return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("header",{className:"pb-4",children:[e.jsxs("h1",{className:"text-2xl md:text-3xl font-bold tracking-tight text-foreground dark:text-dark-foreground flex items-center",children:[e.jsx(L,{className:"h-7 w-7 md:h-8 md:w-8 mr-2 text-primary dark:text-dark-primary"}),"StealthWriter"]}),e.jsx("p",{className:"mt-1 text-muted-foreground dark:text-dark-muted-foreground",children:"Refine your writing with nuanced control. Paraphrase, improve clarity, change tone, or humanize text."})]}),e.jsxs(g,{title:"Rewrite Configuration",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(S,{label:"Rewrite Action",options:M,value:l,onChange:t=>z(t.target.value)}),e.jsx(S,{label:"Target Writing Tone",options:O,value:r.writingTone,onChange:t=>R({writingTone:t.target.value}),disabled:l==="Change Tone"&&r.writingTone===C.ACADEMIC})]}),l==="Custom Instructions"&&e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{htmlFor:"customInstructions",className:"block text-sm font-medium text-foreground dark:text-dark-foreground mb-1.5",children:"Custom Rewrite Instructions"}),e.jsx("textarea",{id:"customInstructions",rows:3,className:"w-full p-2.5 border rounded-md focus:ring-2 focus:ring-primary dark:focus:ring-dark-primary focus:border-transparent bg-background dark:bg-dark-input dark:border-dark-border dark:text-dark-foreground dark:placeholder-dark-muted-foreground transition-all",placeholder:"e.g., Make it sound more persuasive, shorten by 20%, explain for a non-expert audience.",value:x,onChange:t=>b(t.target.value),"aria-label":"Custom rewrite instructions"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(g,{title:j?`Original Text (from ${j})`:"Original Text",children:e.jsx("textarea",{value:c,onChange:t=>h(t.target.value),rows:12,className:"w-full p-2.5 border rounded-md focus:ring-2 focus:ring-primary dark:focus:ring-dark-primary focus:border-transparent bg-background dark:bg-dark-input dark:border-dark-border dark:text-dark-foreground dark:placeholder-dark-muted-foreground transition-all",placeholder:"Paste your text here or use 'Send to Tool' from another feature...","aria-label":"Original text input"})}),e.jsx(g,{title:"Rewritten Text",children:e.jsx("div",{"aria-live":"polite","aria-busy":u,className:"h-full",children:u?e.jsx("div",{className:"flex items-center justify-center h-full min-h-[240px]",children:e.jsx(G,{text:"StealthWriter is artfully rephrasing your text..."})}):n?e.jsxs(e.Fragment,{children:[e.jsx("textarea",{readOnly:!0,value:n,rows:12,className:"w-full h-full p-2.5 border rounded-md bg-muted/50 dark:bg-dark-input/30 dark:text-dark-foreground dark:border-dark-border whitespace-pre-wrap transition-all","aria-label":"Rewritten text"}),e.jsxs("div",{className:"mt-3 flex flex-wrap gap-2 justify-between items-center",children:[e.jsx(J,{textToShare:n,documentName:D,sourceFeatureName:"StealthWriter"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-xs text-muted-foreground dark:text-dark-muted-foreground mr-1",children:"Helpful?"}),e.jsx(d,{variant:"ghost",size:"sm",onClick:()=>{a("Feedback recorded (mock).","info")},className:"p-1 text-muted-foreground hover:text-primary",children:e.jsx(K,{})}),e.jsx(d,{variant:"ghost",size:"sm",onClick:()=>{a("Feedback recorded (mock).","info")},className:"p-1 text-muted-foreground hover:text-destructive",children:e.jsx(Q,{})})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 justify-end",children:[e.jsx(d,{onClick:F,variant:"outline",size:"sm",children:"Copy"}),e.jsx(d,{onClick:A,variant:"outline",size:"sm",children:"Download as .txt"}),e.jsx(d,{onClick:H,variant:"outline",size:"sm",children:"Save to Google Drive"})]})]})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center h-full min-h-[240px] text-muted-foreground dark:text-dark-muted-foreground p-4 text-center",children:[e.jsx(Y,{className:"h-12 w-12 text-primary/30 dark:text-dark-primary/30 mb-4"}),e.jsx("p",{className:"font-semibold",children:"Ready for Transformation"}),e.jsx("p",{className:"text-sm mt-1",children:"Enter your original text, choose a rewrite action, and let StealthWriter work its magic."})]})})})]}),k&&!u&&e.jsxs(g,{className:"bg-destructive/10 border-destructive text-destructive-foreground dark:bg-destructive/20 dark:text-destructive",children:[e.jsx("p",{className:"font-semibold",children:"Error Rewriting"}),e.jsx("p",{className:"text-sm",children:k})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-center items-center mt-6 space-y-2 sm:space-y-0 sm:space-x-3",children:[e.jsx(d,{onClick:E,isLoading:u,disabled:!c.trim(),size:"lg",children:"Rewrite Text"}),(c||n)&&e.jsx(d,{onClick:W,variant:"outline",size:"lg",disabled:u,children:"Clear All Fields"})]})]})};export{se as default};
